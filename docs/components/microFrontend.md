# 微前端面试问题与答案

## ❓什么是微前端？为什么需要微前端架构？
### 🙋 回答：
微前端是一种`前端架构模式`，它将一个大的前端应用分成多个小的应用，并把这些小的前端应用集成为一个应用。每个小的前端应用可以独立运行、独立开发、独立部署。
微前端架构的需求源于以下几点：
- `技术栈无关` ：支持不同团队使用不同技术栈独立开发
- `独立开发部署` ：各团队可以独立开发、测试和部署自己的应用，减少协作成本
- `增量升级` ：可以逐步替换旧系统而不需要完全重写
- `更好的可维护性` ：代码库更小，更容易理解和维护

## ❓目前主流的微前端解决方案有哪些？它们各有什么特点？
### 🙋 回答：
- Wujie（无界） ：基于 Web Components + iframe 的方案，特点是原生隔离、性能好、接入成本低
- qiankun ：基于 single-spa 的方案，使用 JavaScript 沙箱和样式隔离
- micro-app ：基于 Web Components 的方案，使用自定义元素和 Shadow DOM
- single-spa ：最早的微前端框架之一，提供了基础的应用注册和生命周期管理
- Module Federation ：Webpack 5 提供的模块联邦功能，支持应用间共享模块

## ❓你们项目中使用的 Wujie 微前端框架有什么优势？
### 🙋 回答：
- `成本低` ：主应用和子应用的适配成本都很低，改造工作量小
- `速度快` ：子应用首屏打开速度快，运行性能好
- `原生隔离` ：CSS 通过 Web Components (Shadow DOM) 实现原生隔离，JS 通过 iframe 实现原生隔离
- `功能强大` ：支持子应用保活、嵌套、多应用激活、应用共享、去中心化通信等高级特性
- `框架兼容性好` ：支持各种主流框架，包括 Vue、React 等

## ❓微前端架构中，主应用和子应用之间如何通信？
### 🙋 回答：
1. `Props 传递` ：主应用可以通过 props 向子应用传递数据和方法
```js
// 主应用传递 props
<WujieVue name="子应用名" url="子应用地址" :props="props"></WujieVue>

// 子应用接收
window.$wujie?.props
```
2. `事件通信（EventBus）` ：Wujie 提供了跨应用的事件总线
```js
// 主应用发送事件
import { bus } from "wujie";
bus.$emit("事件名称", 数据);

// 子应用监听事件
window.$wujie.bus.$on("事件名称", (数据) => { /* 处理数据 */ });
```
3. `全局共享` ：通过 window.$wujie 对象共享数据

## ❓Wujie 是如何实现 CSS 和 JavaScript 的隔离的？
### 🙋 回答：
Wujie 采用了双重隔离机制：
- `CSS 隔离` ：使用 Web Components 的 Shadow DOM 特性，为每个子应用创建一个独立的 DOM 树和样式作用域，确保样式不会相互污染
- `JavaScript 隔离` ：使用 iframe 沙箱机制，为每个子应用提供独立的全局执行环境，同时通过 Proxy 代理对象拦截和修改全局对象的访问，防止全局变量污染

## ❓微前端架构中如何处理公共依赖？
### 🙋 回答：
1. `外部共享` ：将常用库（如 React、Vue、lodash 等）配置为外部依赖，由主应用提供
```js
// 在子应用的 webpack 配置中
externals: {
  'react': 'React',
  'react-dom': 'ReactDOM'
}
```
2. `运行时注入` ：主应用在运行时将公共依赖注入到子应用的全局对象中
3. `单独加载` ：每个子应用独立加载自己需要的依赖，虽然会增加重复加载，但避免了版本冲突问题
4. `依赖提升` ：使用 Wujie 的插件系统，将特定依赖提升到主应用级别